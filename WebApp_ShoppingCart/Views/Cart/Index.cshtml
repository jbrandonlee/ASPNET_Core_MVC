@{
	ViewData["Title"] = "My Cart";
	if (String.IsNullOrEmpty((string?)ViewData["Username"])) { ViewData["Username"] = ", User"; }
	var cart = ViewBag.Cart;
}

<div id="body-cart">
	<h1 class="display-4">Cart/Index</h1><br />
	<div class="product-container">
		<script src="~/js/cart.js"></script>
		@if (cart != null && cart.Count > 0)
		{
			@foreach (CartItem c in cart)
			{
				string displayPrice = String.Format($"{c.Price:C2}");

				<div class="row product-row justify-content-center mb-4">
					<div class="col-6 col-md-4">
						<div class="card">
							<img src="@c.ImageUrl" class="card-img-top">
							<div class="card-body">
								<h5 class="card-title">@c.Name</h5>
								<p class="card-text desc-height-3">@c.Description</p>
							</div>
						</div>
					</div>
					<div class="col-6 col-md-4 product-details-container">
						<div class="product-details">
							<div class="row">
								<span class="col-4">Price:</span>
								<span class="col-8">@displayPrice</span>
							</div>
							<div class="row">
								<span class="col-4">Quantity:</span>
								<span class="col-8"><input type="number" class="form-control" value="@c.Quantity" oninput="changeitem('@c.Id',this.value,'@c.CustomerId')" style="max-width:5rem" /></span>
							</div>
							<div class="row">
								<span class="col-4"></span>
								<span class="col-8"><button class="btn btn-danger" onclick="deleteitem('@c.CustomerId','@c.Id')">Remove</button></span>
							</div>
						</div>
					</div>
				</div>
			}
		}
		else
		{
			<p>Your cart is empty.</p>
		}
	</div>
</div>
